# Aura é¡¹ç›® - å¼€å‘è§„èŒƒ

## ğŸ“‹ ä»£ç è§„èŒƒ

### Javaï¼ˆåç«¯ï¼‰

#### å‘½åçº¦å®š
- **ç±»å**: `PascalCase`ï¼ˆä¾‹å¦‚ï¼š`ProductService`ï¼‰
- **æ–¹æ³•å**: `camelCase`ï¼ˆä¾‹å¦‚ï¼š`getProductById`ï¼‰
- **å¸¸é‡**: `UPPER_SNAKE_CASE`ï¼ˆä¾‹å¦‚ï¼š`MAX_RETRY_COUNT`ï¼‰
- **åŒ…å**: `lowercase`ï¼ˆä¾‹å¦‚ï¼š`com.aura.service`ï¼‰

#### æ–‡æ¡£æ³¨é‡Š
```java
/**
 * ç±»/æ–¹æ³•çš„ç®€è¦æè¿°ã€‚
 * 
 * å¦‚éœ€è¦å¯æ·»åŠ è¯¦ç»†è¯´æ˜ã€‚
 * 
 * @param paramName å‚æ•°æè¿°
 * @return è¿”å›å€¼æè¿°
 * @throws ExceptionType ä½•æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸
 */
```

#### é”™è¯¯å¤„ç†
```java
// âœ… å¥½çš„åšæ³•
try {
    return productRepository.findById(id)
        .orElseThrow(() -> new ResourceNotFoundException("Product not found: " + id));
} catch (DataAccessException e) {
    log.error("Database error while fetching product: {}", id, e);
    throw new ServiceException("Failed to retrieve product", e);
}

// âŒ ä¸å¥½çš„åšæ³•
try {
    return productRepository.findById(id).get();
} catch (Exception e) {
    e.printStackTrace();
    return null;
}
```

### TypeScriptï¼ˆå‰ç«¯ï¼‰

#### å‘½åçº¦å®š
- **ç»„ä»¶**: `PascalCase`ï¼ˆä¾‹å¦‚ï¼š`ProductCard`ï¼‰
- **å‡½æ•°**: `camelCase`ï¼ˆä¾‹å¦‚ï¼š`fetchProducts`ï¼‰
- **å¸¸é‡**: `UPPER_SNAKE_CASE`ï¼ˆä¾‹å¦‚ï¼š`API_BASE_URL`ï¼‰
- **æ¥å£**: `PascalCase` åŠ  `I` å‰ç¼€ï¼ˆä¾‹å¦‚ï¼š`IProduct`ï¼‰

#### ç±»å‹å®‰å…¨
```typescript
// âœ… å¥½çš„åšæ³•
interface Product {
  id: string;
  name: string;
  price: number;
}

const fetchProduct = async (id: string): Promise<Product> => {
  const response = await api.get<Product>(`/products/${id}`);
  return response.data;
};

// âŒ ä¸å¥½çš„åšæ³•
const fetchProduct = async (id) => {
  const response = await api.get(`/products/${id}`);
  return response.data;
};
```

---

## ğŸ”„ Git å·¥ä½œæµ

### åˆ†æ”¯ç­–ç•¥

```
mainï¼ˆç”Ÿäº§å°±ç»ªä»£ç ï¼‰
  â””â”€â”€ developï¼ˆé›†æˆåˆ†æ”¯ï¼‰
       â”œâ”€â”€ feature/product-api
       â”œâ”€â”€ feature/ai-agent
       â””â”€â”€ bugfix/order-validation
```

### åˆ†æ”¯å‘½å

- **åŠŸèƒ½**: `feature/ç®€çŸ­æè¿°`
- **Bug ä¿®å¤**: `bugfix/é—®é¢˜æè¿°`
- **ç´§æ€¥ä¿®å¤**: `hotfix/ä¸¥é‡é—®é¢˜`

### æäº¤ä¿¡æ¯

éµå¾ª [çº¦å®šå¼æäº¤](https://www.conventionalcommits.org/zh-hans/)ï¼š

```
<ç±»å‹>(<èŒƒå›´>): <ä¸»é¢˜>

<æ­£æ–‡>

<é¡µè„š>
```

**ç±»å‹ï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£
- `style`: æ ¼å¼åŒ–
- `refactor`: ä»£ç é‡æ„
- `test`: æ·»åŠ æµ‹è¯•
- `chore`: ç»´æŠ¤

**ç¤ºä¾‹ï¼š**
```bash
feat(ai): å®ç°äº§å“è¯´æ˜ä¹¦çš„ RAG æœåŠ¡
fix(order): éªŒè¯é…é€åœ°å€æ ¼å¼
docs(api): æ·»åŠ  OpenAPI æ–‡æ¡£
refactor(product): ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
```

### å·¥ä½œæµæ­¥éª¤

1. **åˆ›å»ºåˆ†æ”¯**
   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b feature/ä½ çš„åŠŸèƒ½åç§°
   ```

2. **è¿›è¡Œä¿®æ”¹**
   ```bash
   # è¿›è¡Œä¿®æ”¹
   git add .
   git commit -m "feat(èŒƒå›´): æè¿°"
   ```

3. **æ¨é€å¹¶åˆ›å»º PR**
   ```bash
   git push origin feature/ä½ çš„åŠŸèƒ½åç§°
   # åœ¨ GitHub ä¸Šåˆ›å»º Pull Request
   ```

4. **ä»£ç å®¡æŸ¥**
   - è‡³å°‘éœ€è¦ 1 äººæ‰¹å‡†
   - æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡
   - æ— åˆå¹¶å†²çª

5. **åˆå¹¶**
   ```bash
   # Squash åˆå¹¶åˆ° develop
   git checkout develop
   git pull origin develop
   ```

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### åç«¯æµ‹è¯•

#### å•å…ƒæµ‹è¯•
```java
@Test
void shouldReturnProductWhenIdExists() {
    // Givenï¼ˆå‡†å¤‡ï¼‰
    String productId = "p1";
    Product product = new Product();
    product.setId(productId);
    when(productRepository.findById(productId))
        .thenReturn(Optional.of(product));
    
    // Whenï¼ˆæ‰§è¡Œï¼‰
    Product result = productService.getProductById(productId);
    
    // Thenï¼ˆéªŒè¯ï¼‰
    assertNotNull(result);
    assertEquals(productId, result.getId());
}
```

#### é›†æˆæµ‹è¯•
```java
@SpringBootTest
@AutoConfigureMockMvc
class ProductControllerIntegrationTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    void shouldReturnProductList() throws Exception {
        mockMvc.perform(get("/api/products"))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.data").isArray());
    }
}
```

### å‰ç«¯æµ‹è¯•

```typescript
describe('ProductCard', () => {
  it('åº”è¯¥æ¸²æŸ“äº§å“ä¿¡æ¯', () => {
    const product = {
      id: 'p1',
      name: 'Aura Harmony',
      price: 429
    };
    
    render(<ProductCard product={product} />);
    
    expect(screen.getByText('Aura Harmony')).toBeInTheDocument();
    expect(screen.getByText('$429')).toBeInTheDocument();
  });
});
```

---

## ğŸ“ ä»£ç å®¡æŸ¥æ¸…å•

### æäº¤ PR å‰

- [ ] ä»£ç éµå¾ªæ ·å¼æŒ‡å—
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä¸ºæ–°åŠŸèƒ½æ·»åŠ äº†æ–°æµ‹è¯•
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ—  console.log æˆ–è°ƒè¯•è¯­å¥
- [ ] æ— æ³¨é‡Šæ‰çš„ä»£ç 
- [ ] æäº¤ä¿¡æ¯éµå¾ªçº¦å®š

### å®¡æŸ¥è€…æ¸…å•

- [ ] ä»£ç å¯è¯»ä¸”å¯ç»´æŠ¤
- [ ] é€»è¾‘æ­£ç¡®
- [ ] å¤„ç†äº†è¾¹ç•Œæƒ…å†µ
- [ ] è€ƒè™‘äº†æ€§èƒ½
- [ ] æ£€æŸ¥äº†å®‰å…¨æ¼æ´
- [ ] æµ‹è¯•å…¨é¢

---

## ğŸš€ CI/CD æµæ°´çº¿

### GitHub Actions å·¥ä½œæµ

```yaml
name: CI/CD

on:
  push:
    branches: [ develop, main ]
  pull_request:
    branches: [ develop, main ]

jobs:
  backend-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: è®¾ç½® JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
      - name: æ„å»ºå’Œæµ‹è¯•
        run: |
          cd aura-backend
          mvn clean test
  
  frontend-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: è®¾ç½® Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      - name: å®‰è£…å’Œæµ‹è¯•
        run: |
          npm install
          npm test
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### åç«¯

- æ•°æ®åº“æŸ¥è¯¢: < 100ms
- API å“åº”æ—¶é—´: < 500ms
- AI å“åº”æ—¶é—´: < 3s

### å‰ç«¯

- é¦–æ¬¡å†…å®¹ç»˜åˆ¶: < 1.5s
- å¯äº¤äº’æ—¶é—´: < 3s
- æ‰“åŒ…å¤§å°: < 500KB

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### åç«¯

1. **è¾“å…¥éªŒè¯**
   ```java
   @PostMapping("/orders")
   public ResponseEntity<?> createOrder(@Valid @RequestBody OrderRequest request) {
       // @Valid è§¦å‘éªŒè¯
   }
   ```

2. **SQL æ³¨å…¥é˜²æŠ¤**
   ```java
   // âœ… ä½¿ç”¨ JPA/JPQL
   @Query("SELECT p FROM Product p WHERE p.name LIKE %:keyword%")
   List<Product> searchByName(@Param("keyword") String keyword);
   ```

3. **API é™æµ**
   ```java
   @RateLimiter(name = "aiChat", fallbackMethod = "rateLimitFallback")
   public ChatResponse chat(ChatRequest request) {
       // å®ç°
   }
   ```

### å‰ç«¯

1. **XSS é˜²æŠ¤**
   ```typescript
   // âœ… React è‡ªåŠ¨è½¬ä¹‰
   <div>{userInput}</div>
   
   // âŒ å±é™©
   <div dangerouslySetInnerHTML={{__html: userInput}} />
   ```

2. **API å¯†é’¥ä¿æŠ¤**
   ```typescript
   // âœ… è°ƒç”¨åç«¯ API
   const response = await fetch('/api/ai/chat', { ... });
   
   // âŒ æ°¸è¿œä¸è¦æš´éœ² API å¯†é’¥
   const response = await fetch('https://api.openai.com/...', {
     headers: { 'Authorization': 'Bearer sk-...' }
   });
   ```

---

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### API æ–‡æ¡£

ä½¿ç”¨ OpenAPI/Swagger æ³¨è§£ï¼š

```java
@Operation(summary = "æ ¹æ® ID è·å–äº§å“")
@ApiResponses(value = {
    @ApiResponse(responseCode = "200", description = "æ‰¾åˆ°äº§å“"),
    @ApiResponse(responseCode = "404", description = "äº§å“æœªæ‰¾åˆ°")
})
@GetMapping("/{id}")
public ResponseEntity<Product> getProduct(@PathVariable String id) {
    // å®ç°
}
```

### README æ–‡ä»¶

æ¯ä¸ªæ¨¡å—éƒ½åº”è¯¥æœ‰ READMEï¼ŒåŒ…å«ï¼š
- ç›®çš„
- è®¾ç½®è¯´æ˜
- ä½¿ç”¨ç¤ºä¾‹
- API æ–‡æ¡£ï¼ˆå¦‚é€‚ç”¨ï¼‰

---

## ğŸ¯ å®Œæˆå®šä¹‰

ä»»åŠ¡è¢«è®¤ä¸º"å®Œæˆ"çš„æ¡ä»¶ï¼š

- [ ] ä»£ç å·²ç¼–å†™å¹¶éµå¾ªè§„èŒƒ
- [ ] å•å…ƒæµ‹è¯•å·²ç¼–å†™å¹¶é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²å®¡æŸ¥å¹¶æ‰¹å‡†
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] å·²åˆå¹¶åˆ° develop åˆ†æ”¯
- [ ] å·²éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ
- [ ] åœ¨å¼€å‘ç¯å¢ƒä¸­æµ‹è¯•é€šè¿‡

---

## ğŸ“ è·å–å¸®åŠ©

- **æŠ€æœ¯é—®é¢˜**: åœ¨ #dev-help Slack é¢‘é“æé—®
- **æ¶æ„å†³ç­–**: å’¨è¯¢æŠ€æœ¯è´Ÿè´£äºº
- **é˜»å¡é—®é¢˜**: åœ¨æ¯æ—¥ç«™ä¼šä¸­æå‡º

---

**æœ€åæ›´æ–°**: 2026-01-27  
**ç‰ˆæœ¬**: 1.0
